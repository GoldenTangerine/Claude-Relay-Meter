# Claude Relay Meter v1.0.2 更新说明

**发布日期**: 2025-10-11

## 🌐 主要更新：国际化支持

v1.0.2 版本为 Claude Relay Meter 带来了完整的多语言支持，现在支持中文和英文界面！

### ✨ 新增功能

#### 1. **多语言界面支持**
- ✅ **中文 (Chinese)** - 默认语言
- ✅ **English** - 完整英文翻译

#### 2. **语言切换功能**
- 新增命令：`Claude Relay Meter: Select Language / 选择语言`
- 支持通过命令面板快速切换语言
- 支持通过设置界面配置语言
- 切换语言后界面实时更新，无需重启

#### 3. **新增配置项**
- `relayMeter.language`: 扩展界面语言
  - 可选值：`zh` (中文) 或 `en` (English)
  - 默认值：`zh` (中文)

### 🔧 技术改进

#### 国际化架构
- 实现完整的 i18n 系统，参照 cursor-stats 项目设计
- 新增文件：
  - `src/interfaces/i18n.ts` - 语言包类型定义
  - `src/utils/i18n.ts` - 国际化工具函数
  - `src/locales/zh.json` - 中文语言包
  - `src/locales/en.json` - 英文语言包
- 支持翻译键嵌套和参数替换
- 自动回退到中文（如果翻译缺失）

#### 构建流程优化
- 编译脚本自动复制语言包文件到 `out/locales/`
- 新增 `npm run copy-locales` 命令

#### 代码优化
- 所有用户可见文本使用 `t()` 函数进行翻译
- 状态栏、工具提示、通知消息、错误提示全部支持多语言
- 命令标题显示双语（中文/英文）
- 配置描述显示双语说明

### 📦 打包改进

- 修复依赖打包问题
  - 移除 `.vscodeignore` 中的 `node_modules` 排除规则
  - 确保所有依赖（包括嵌套依赖）被正确打包
  - 解决了 `asynckit` 模块找不到的问题

### 📝 文档更新

- 更新 `CLAUDE.md` - 添加国际化章节
- 新增国际化使用指南
- 更新文件组织结构说明
- 添加如何添加新语言的说明

### 🎯 使用方法

#### 方法 1：通过命令面板
1. 按 `Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac)
2. 输入 "Select Language" 或 "选择语言"
3. 选择所需语言
4. 界面立即切换

#### 方法 2：通过设置
1. 打开 VSCode 设置 (File > Preferences > Settings)
2. 搜索 "relay meter language"
3. 在 `Relay Meter: Language` 下拉菜单中选择语言
4. 界面自动更新

### 🔄 迁移指南

从 v1.0.0/v1.0.1 升级到 v1.0.2：
- ✅ **无需任何操作** - 向后完全兼容
- 默认保持中文界面
- 所有现有配置和功能不受影响
- 如需使用英文界面，手动切换语言即可

### 🐛 修复的问题

1. **扩展加载失败** - 修复了 `asynckit` 模块找不到的问题
2. **输出通道不显示** - 移除了自动弹出输出面板的行为
3. **状态栏不显示** - 优化了状态栏初始化流程，确保在所有情况下都能正常显示

### 🛠️ 技术细节

#### 翻译覆盖范围
- ✅ 状态栏文本
- ✅ 工具提示内容
- ✅ 错误消息
- ✅ 通知消息
- ✅ 命令标题
- ✅ 配置描述
- ✅ 加载状态
- ✅ 配置提示

#### i18n 系统特性
- 🎯 类型安全的翻译键
- 🔄 自动语言切换
- 📦 独立的语言包文件
- 🌐 易于扩展新语言
- 🔙 智能回退机制
- 🔧 参数化翻译支持

### 📊 版本对比

| 特性 | v1.0.0 | v1.0.2 |
|------|---------|---------|
| 中文界面 | ✅ | ✅ |
| 英文界面 | ❌ | ✅ |
| 语言切换 | ❌ | ✅ |
| 国际化架构 | ❌ | ✅ |
| 依赖打包 | ⚠️ 不完整 | ✅ 完整 |
| 文档完善度 | 基础 | 详细 |

### 🚀 未来计划

欢迎社区贡献更多语言翻译：
- 日语 (Japanese)
- 韩语 (Korean)
- 德语 (German)
- 俄语 (Russian)
- 其他语言...

贡献方法请参考 [CLAUDE.md](CLAUDE.md) 中的"Adding New Languages"章节。

---

## 致谢

感谢 [cursor-stats](https://github.com/Dwtexe/cursor-stats) 项目提供的国际化实现参考。

如有问题或建议，请提交 Issue 或 Pull Request。
